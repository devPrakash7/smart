<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <title>Livoso</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta content="" name="description" />
    <meta content="coderthemes" name="author" />

    <!-- Theme favicon -->
    <link rel="shortcut icon" href="assets/favicon-8fd74f43.ico">
    <link rel="stylesheet" href="assets/theme-d32f8eb8.css">
</head>

<body class="relative lg:h-screen py-6 flex justify-center items-center bg-auto bg-no-repeat bg-primary/10"
    style="background-image: url('assets/auth-bg-f57aaf4d.png');">
    <div class="container">
        <div class="flex justify-center">
            <div class="lg:w-1/3 md:w-2/3 w-full relative">
                <div class="relative bg-white rounded-lg shadow-lg p-6 z-10 dark:bg-default-50">
                    <a href="index.html" class="block mb-8">
                        <img class="h-12 dark:hidden block" src="image/logo-dark-befc834f.png" alt="">
                        <img class="h-12 dark:block hidden" src="image/logo-dark-befc834f.png" alt="">
                    </a>

                    <h4 class="text-2xl font-semibold text-default-800 mb-4">Log In</h4>
                    <p class="mb-10 dark:text-default-600">Glad Youâ€™re Back!</p>

                    <form action="#">

                        <div class="mb-4">
                            <label for="LogInEmailAddress"
                                class="block text-base/normal font-semibold text-default-900 mb-2">Email address</label>
                            <input
                                class="block w-full rounded py-2.5 px-4 bg-transparent border-default-200 text-default-900 focus:outline-0 focus:ring-0"
                                type="email" id="LogInEmailAddress" placeholder="Enter your email">
                        </div>

                        <div class="mb-4">
                            <label for="password"
                                class="block text-base/normal font-semibold text-default-900 mb-2">Password</label>
                            <div class="flex" data-x-password="">
                                <input type="password" id="form-password"
                                    class="form-password text-default-900 block w-full rounded-s py-2.5 px-4 bg-transparent border border-default-200 focus:ring-transparent -me-px"
                                    placeholder="Enter your password">
                                <button type="button" id="registerButton"
                                    class="password-toggle inline-flex items-center justify-center py-2.5 px-4 border rounded-e bg-transparent border-default-200">
                                    <i data-lucide="eye" class="password-eye-on h-5 w-5 text-default-600"></i>
                                    <i data-lucide="eye-off"
                                        class="password-eye-off h-5 w-5 text-default-600 hidden"></i>
                                </button>
                            </div>
                        </div>

                        <button
                            class="relative inline-flex items-center justify-center px-6 py-3 rounded text-base bg-primary text-white capitalize transition-all hover:bg-primary-500 w-full"
                            onclick="submitForm()">Login</button>

                        <h4 class="text-center text-base text-default-700 mb-4">Already have an account back to ? <a
                                href="auth-register.html" class="text-primary">Register</a></h4>
                        <p class="text-center text-sm text-default-700">
                            <a href="forgot-password.html" class="text-primary">Forgot your password?</a>
                        </p>
                    </form>
                </div>

                <div class="lg:flex hidden">
                    <div class="absolute start-0 bottom-0 -ms-[11.75rem] -z-0">
                        <img src="assets/auth-cardbg-1-5e4948cf.png" alt="" class="">
                    </div>

                    <div class="absolute end-0 bottom-0 -me-36 -z-0">
                        <img src="assets/auth-cardbg-2-8584e00f.png" alt="" class="">
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="fixed bottom-5 end-5 flex flex-col items-center bg-primary/25 rounded-full z-10 print:hidden">
        <button
            class="h-0 w-8 opacity-0 flex justify-center items-center transition-all duration-500 translate-y-5 z-10"
            data-toggle="back-to-top">
            <i class="h-5 w-5 text-primary-500 mt-1" data-lucide="chevron-up"></i>
        </button>
        <button class="rounded-full h-10 w-10 bg-primary text-white flex justify-center items-center z-20">
            <i class="h-5 w-5" data-lucide="sun" id="light-theme"></i>
            <i class="h-5 w-5" data-lucide="moon" id="dark-theme"></i>
        </button>
    </div>


    <!-- Theme Js -->

    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

    <script>
        async function submitForm() {

            const registerForm = document.querySelector('form');
            const emailAddress = document.getElementById('LogInEmailAddress').value;
            const password = document.getElementById('form-password').value;

            if (!emailAddress || !password) {
                alert('Please fill in both email and password fields.');
                return;
            }

            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailRegex.test(emailAddress)) {
                alert('Please enter a valid email address.');
                return;
            }

            if (password.length <= 8) {
                alert('Password must be at least 8 characters long.');
                return;
            }

            const formData = {
                email: emailAddress,
                password: password,
            };

            try {
                const response = await axios.post('http://localhost:8001/v1/users/login', formData, {
                    headers: {
                        'Content-Type': 'application/json'
                    },
                });


                if (response.status == 200) {
                    alert('Login successfully');
                    localStorage.setItem("token", response.data.data.tokens);
                    console.log(localStorage.getItem('token'))
                    window.location.href = 'home.html';

                } else {
                    alert('Login failed. Please check your credentials.');
                    window.location.href = 'auth-login.html';
                }

            } catch (err) {
                console.error('Error during login:', err.message);
            }
        }

    </script>


</body>

</html>